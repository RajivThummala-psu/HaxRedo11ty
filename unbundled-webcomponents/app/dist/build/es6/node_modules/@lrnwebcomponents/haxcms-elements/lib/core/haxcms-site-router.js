import{Router}from"../../../../@vaadin/router/dist/vaadin-router.js";import{autorun}from"../../../../mobx/lib/mobx.module.js";import{store}from"./haxcms-site-store.js";class HAXCMSSiteRouter extends HTMLElement{static get tag(){return"haxcms-site-router"}constructor(){super();let options={};this.baseURI&&(options.baseUrl=this.baseURI),this.router=new Router(this,options),this.__disposer=autorun(()=>{this._updateRouter(store.routerManifest)}),window.addEventListener("vaadin-router-location-changed",this._routerLocationChanged.bind(this))}disconnectedCallback(){this.__disposer(),window.removeEventListener("vaadin-router-location-changed",this._routerLocationChanged.bind(this)),super.disconnectedCallback()}_updateRouter(routerManifest){if(!routerManifest||void 0===routerManifest.items)return;const routerItems=routerManifest.items.map(i=>({path:i.slug,name:i.id,component:`fake-${i.id}-e`}));this.router.setRoutes([...routerItems,{path:"/",component:"fake-home-e",name:"home"},{path:"/(.*)",component:"fake-404-e",name:"404"}])}_routerLocationChanged(e){store.location=e.detail.location}}window.customElements.define(HAXCMSSiteRouter.tag,HAXCMSSiteRouter);export{HAXCMSSiteRouter};