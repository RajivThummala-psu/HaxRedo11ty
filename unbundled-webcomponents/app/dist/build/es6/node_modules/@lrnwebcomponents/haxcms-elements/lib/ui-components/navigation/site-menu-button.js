/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import{LitElement,html,css}from"../../../../../lit-element/lit-element.js";import{store}from"../../core/haxcms-site-store.js";import{autorun,toJS}from"../../../../../mobx/lib/mobx.module.js";import"../../../../../@polymer/polymer/lib/elements/custom-style.js";class SiteMenuButton extends LitElement{static get styles(){return[css`
        :host {
          display: block;
          font-size: 16px;
          transition: 0.3s all ease-in-out;
        }
        :host([disabled]) {
          pointer-events: none;
          opacity: 0.3;
        }
        a {
          color: var(--site-menu-button-link-color, black);
          text-decoration: var(--site-menu-button-link-decoration, underline);
        }
        paper-button {
          transition: 0.3s all ease-in-out;
          min-width: unset;
        }
        paper-button:hover,
        paper-button:focus,
        paper-button:active {
          color: var(--site-menu-button-button-hover-color, inherit);
          background-color: var(
            --site-menu-button-button-hover-background-color,
            inherit
          );
        }
        iron-icon {
          display: block;
          font-size: 16px;
          --iron-icon-width: var(--site-menu-button-icon-width, 32px);
          --iron-icon-height: var(--site-menu-button-icon-height, 32px);
          --iron-icon-fill-color: var(
            --site-menu-button-icon-fill-color,
            black
          );
        }
        simple-tooltip {
          --simple-tooltip-background: var(
            --site-menu-button-tooltip-bg,
            #000000
          );
          --simple-tooltip-opacity: 1;
          --simple-tooltip-text-color: var(
            --site-menu-button-tooltip-text,
            #ffffff
          );
          --simple-tooltip-delay-in: 0;
          --simple-tooltip-border-radius: 0;
        }
      `]}static get tag(){return"site-menu-button"}constructor(){super(),this.__disposer=[],autorun(reaction=>{this.activeRouterManifestIndex=toJS(store.activeRouterManifestIndex),this.__disposer.push(reaction)}),autorun(reaction=>{this.routerManifest=toJS(store.routerManifest),this.__disposer.push(reaction)}),autorun(reaction=>{this.editMode=toJS(store.editMode),this.__disposer.push(reaction)}),import("../../../../../@polymer/iron-icon/iron-icon.js"),import("../../../../../@polymer/iron-icons/iron-icons.js"),import("../../../../simple-tooltip/simple-tooltip.js"),import("../../../../../@polymer/paper-button/paper-button.js")}render(){return html`
      <custom-style>
        <style>
          paper-button {
            @apply --site-menu-button-button;
          }
        </style>
      </custom-style>
      <a tabindex="-1" ?disabled="${this.disabled}" .title="${this.label}">
        <paper-button
          id="menulink"
          noink
          ?disabled="${this.disabled}"
          ?raised="${this.raised}"
          title="${this.label}"
        >
          <slot name="prefix"></slot>
          <iron-icon icon="${this.icon}"></iron-icon>
          <slot name="suffix"></slot>
        </paper-button>
      </a>
      <simple-tooltip for="menulink" offset="8" .position="${this.position}">
        ${this.label}
      </simple-tooltip>
    `}static get properties(){return{type:{type:String,reflect:!0},activeRouterManifestIndex:{type:String},routerManifest:{type:Object},link:{type:String},editMode:{type:Boolean,reflect:!0,attribute:"edit-mode"},disabled:{type:Boolean,reflect:!0,attribute:"disabled"},label:{type:String},icon:{type:String},position:{type:String},raised:{type:Boolean}}}updated(changedProperties){changedProperties.forEach((oldValue,propName)=>{"type"==propName&&this._typeChanged(this[propName],oldValue),"link"==propName&&this._linkChanged(this[propName]),["type","activeRouterManifestIndex","routerManifest"].includes(propName)&&this.routerManifest&&(this.link=this.pageLink(this.type,this.activeRouterManifestIndex,this.routerManifest.items),this.label=this.pageLinkLabel(this.type,this.activeRouterManifestIndex,this.routerManifest.items)),["type","activeRouterManifestIndex","routerManifest","editMode","link"].includes(propName)&&this.routerManifest&&(this.disabled=this.pageLinkStatus(this.type,this.activeRouterManifestIndex,this.routerManifest.items,this.editMode,this.link))})}_linkChanged(newValue){null==newValue?this.shadowRoot.querySelector("a").removeAttribute("href"):this.shadowRoot.querySelector("a").setAttribute("href",newValue)}_typeChanged(newValue){"prev"===newValue?(this.icon||(this.icon="icons:chevron-left"),this.position||(this.position="right")):"next"===newValue?(this.icon||(this.icon="icons:chevron-right"),this.position||(this.position="left")):(this.icon="",this.direction="")}pageLink(type,activeRouterManifestIndex,items){return"prev"===type&&items?activeRouterManifestIndex>0&&items[activeRouterManifestIndex-1]?items[activeRouterManifestIndex-1].slug:null:"next"===type&&items&&activeRouterManifestIndex<items.length-1&&items[activeRouterManifestIndex+1]?items[activeRouterManifestIndex+1].slug:null}pageLinkStatus(type,activeRouterManifestIndex,items,editMode,link){if(editMode||null==link)return!0;if("prev"===type){if(0===activeRouterManifestIndex||-1===activeRouterManifestIndex)return!0}else if("next"===type&&items&&activeRouterManifestIndex>=items.length-1)return!0;return!1}pageLinkLabel(type,activeRouterManifestIndex,items){return"prev"===type&&items?0!==activeRouterManifestIndex&&-1!==activeRouterManifestIndex&&items[activeRouterManifestIndex-1]?items[activeRouterManifestIndex-1].title:"":"next"===type&&items?activeRouterManifestIndex>=items.length-1||!items[activeRouterManifestIndex+1]?"":items[activeRouterManifestIndex+1].title:void 0}disconnectedCallback(){for(var i in this.__disposer)this.__disposer[i].dispose();super.disconnectedCallback()}}window.customElements.define(SiteMenuButton.tag,SiteMenuButton);export{SiteMenuButton};